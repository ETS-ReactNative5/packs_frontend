{"version":3,"sources":["../../node_modules/antd/es/notification/style/index.js","../../common/helpers/auth.js","components/SignIn/sign-in.component.jsx","components/SignInMaster/sign-in-master.component.jsx"],"names":["getUserMeta","dispatch","a","storage","getStorage","get","ACCESS_TOKEN","getUserMetaAPI","meta","data","type","category","name","email","username","id","dp","userAuthenticated","delete","REFRESH_TOKEN","connect","state","user","userMeta","useDispatch","useState","signIn","setSignIn","useForm","form","tailLayout","wrapperCol","offset","span","onFinish","password","getJWTTokens","tokens","access","refresh","window","set","notification","error","message","resetFields","className","labelCol","hideRequiredMark","initialValues","remember","onFinishFailed","errorInfo","Item","label","rules","required","Password","valuePropName","htmlType","size","onClick","SignInMaster","src","alt","style","zIndex","position","width","height","backgroundPosition","backgroundSize","md","sm","right","top","opacity","to"],"mappings":"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","file":"static/js/26.5eca44c2.chunk.js","sourcesContent":["import '../../style/index.less';\nimport './index.less';","import {userAuthenticated} from '../actions/signIn';\r\nimport {ACCESS_TOKEN, REFRESH_TOKEN} from '../constants/storage';\r\n\r\nimport {getStorage} from './shared';\r\n\r\nimport {getUserMeta as getUserMetaAPI} from '../api/auth';\r\n\r\nexport const getUserMeta = async (dispatch) => {\r\n  const storage = getStorage();\r\n  if (!(await storage.get(ACCESS_TOKEN, null))) return false;\r\n\r\n  try {\r\n    const {data: meta} = await getUserMetaAPI();\r\n\r\n    if (meta) {\r\n      const {category: type, name, email, username, id, dp} = meta;\r\n      dispatch(userAuthenticated({name, type, email, username, id, dp}));\r\n      return false;\r\n    }\r\n\r\n    await storage.delete(ACCESS_TOKEN);\r\n    await storage.delete(REFRESH_TOKEN);\r\n  } catch (e) {\r\n    // ignore error\r\n  }\r\n\r\n  return true;\r\n};\r\n","import React, {useState} from 'react';\r\nimport {Form, Button, Input, Checkbox, notification} from 'antd';\r\nimport {ACCESS_TOKEN, REFRESH_TOKEN} from 'common/constants/storage';\r\nimport {getJWTTokens} from 'common/api/auth';\r\nimport {getUserMeta} from 'common/helpers/auth';\r\nimport {useDispatch} from 'react-redux';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './sign-in.styles.scss';\r\n\r\nconst SignIn = ({user}) => {\r\n  const dispatch = useDispatch();\r\n  const [signIn, setSignIn] = useState(false);\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const layout = {\r\n    labelCol: {\r\n      span: 8,\r\n    },\r\n    wrapperCol: {\r\n      span: 8,\r\n    },\r\n  };\r\n  const tailLayout = {\r\n    wrapperCol: {\r\n      offset: 9,\r\n      span: 14,\r\n    },\r\n  };\r\n\r\n  const onFinish = async ({username, password}) => {\r\n    try {\r\n      // setLoading(true);\r\n      const {data: tokens} = await getJWTTokens({username, password});\r\n\r\n      const {access, refresh} = tokens;\r\n      await window.storage.set(ACCESS_TOKEN, access);\r\n      await window.storage.set(REFRESH_TOKEN, refresh);\r\n\r\n      console.log(access);\r\n      await getUserMeta(dispatch);\r\n    } catch (e) {\r\n      notification.error({\r\n        message: `Can't Sign In user: ${username} - Invalid Credentials.`,\r\n      });\r\n    }\r\n    form.resetFields();\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n\r\n  const onSignIn = () => {\r\n    setSignIn(true);\r\n  };\r\n\r\n  if (signIn) {\r\n    return (\r\n      <div className=\"sign-in\">\r\n        <Form\r\n          form={form}\r\n          {...layout}\r\n          name=\"basic\"\r\n          hideRequiredMark\r\n          initialValues={{\r\n            remember: true,\r\n          }}\r\n          onFinish={onFinish}\r\n          onFinishFailed={onFinishFailed}>\r\n          <Form.Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your username!',\r\n              },\r\n            ]}>\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: 'Please input your password!',\r\n              },\r\n            ]}>\r\n            <Input.Password />\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"intro\">\r\n      <h1>Welcome to Yantra Packs</h1>\r\n      <br />\r\n      <div className=\"content\">\r\n        Yantra Packs provide sustainable material handling equipment solutions to Auto,\r\n        FMCG,Chemical and Industrial/ Manufacturing companies to help them store and distribute\r\n        goods efficiently, helping them to boost profitability and increase efficiency.\r\n      </div>\r\n      <br /> <br />\r\n      <Button size=\"large\" type=\"primary\" onClick={() => onSignIn()}>\r\n        Sign In\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {user: state.user.userMeta};\r\n};\r\n\r\nexport default connect(mapStateToProps)(SignIn);\r\n","import React from 'react';\r\nimport 'antd/dist/antd.css';\r\nimport { Row, Col, Button } from 'antd';\r\nimport { Link } from '@reach/router';\r\nimport SignIn from '../SignIn/sign-in.component';\r\n\r\nimport './sign-in-master.styles.scss';\r\n\r\nconst SignInMaster = () => (\r\n  <div className='signInMaster'>\r\n    <div className='logo'>\r\n      <img src='home-logo.png' alt='logoimg' style={{ zIndex: '5' }} />\r\n    </div>\r\n    <img\r\n      src='back3.jpg'\r\n      alt='img'\r\n      style={{\r\n        position: 'absolute',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundPosition: 'center',\r\n        backgroundSize: 'cover',\r\n      }}\r\n    />\r\n    <br />\r\n    <br />\r\n    <Row>\r\n      <Col md={10} sm={24}>\r\n        <SignIn />\r\n      </Col>\r\n      <Col md={14}>\r\n        <Button\r\n          type='primary'\r\n          style={{\r\n            position: 'absolute',\r\n            right: '190px',\r\n            top: '160px',\r\n            width: '10px',\r\n            height: '90px',\r\n            opacity: '0',\r\n          }}>\r\n          <Link to='/sign-up/client' />\r\n        </Button>\r\n        <Button\r\n          type='primary'\r\n          style={{\r\n            position: 'absolute',\r\n            right: '150px',\r\n            top: '160px',\r\n            width: '10px',\r\n            height: '90px',\r\n            opacity: '0',\r\n          }}>\r\n          <Link to='/sign-up/employee' />\r\n        </Button>\r\n      </Col>\r\n    </Row>\r\n  </div>\r\n);\r\n\r\nexport default SignInMaster;\r\n"],"sourceRoot":""}