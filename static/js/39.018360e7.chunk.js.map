{"version":3,"sources":["../../common/helpers/api.js","../../common/constants/enviroment.js","../../common/constants/storage.js","../../common/helpers/shared.js","../../common/hooks/api.js","components/TwoLevelPieCharts.js","components/TwoLevelBarCharts.js","hooks/filterPieChart.js","screens/employee/events.screen.js","screens/employee/map.screen.js","screens/employee/dashboard.screen.js"],"names":["axios","defaults","baseURL","DEFAULT_BASE_URL","getAccessToken","a","storage","getStorage","get","ACCESS_TOKEN","accessToken","REFRESH_TOKEN","refreshToken","Error","accessPayload","jwtDecode","Date","parseInt","exp","post","refresh","newAccessToken","data","access","set","loadAPI","url","opts","onSuccess","onFailure","error","secure","defaultData","headers","options","Authorization","res","status","console","log","undefined","loading","response","request","e","message","window","global","defaultAPIResponse","useAPI","useState","setResponse","setRefresh","reload","ox","JSON","stringify","useEffect","load","then","renderActiveShape","cx","cy","midAngle","innerRadius","outerRadius","startAngle","endAngle","fill","percent","payload","value","RADIAN","Math","PI","sin","cos","sx","sy","mx","my","ex","ey","textAnchor","d","stroke","r","x","y","dy","toFixed","Component","TwoLevelBarCharts","this","props","type","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","PureComponent","jsfiddleUrl","dateAsKey","p","tmp","key","hasOwnProperty","substr","push","Cal","allotments","returns","calData","setcalData","allotements","tmpallotements","tmpreturns","title","length","start","color","parseCalData","modalV","setmodalV","currentAllotmentEvent","setcurrentAllotmentEvent","currentReturnEvent","setcurrentReturnEvent","span","plugins","dayGridPlugin","initialView","events","eventClick","allotmentData","find","o","toString","event","returnData","onEventClick","spinning","visible","onOk","onCancel","style","size","bordered","dataSource","renderItem","item","Item","Map","map","parser","DOMParser","parseFromString","map2","src","id","className","dummy","Option","countfromdata","count","i","parseData","name","DashboardScreen","filterKey","transactionHistory","settransactionHistory","obj","newArr","sum","filteredData","Object","keys","useFilterPieChartData","parseDataMonthly","k"],"mappings":"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","file":"static/js/39.018360e7.chunk.js","sourcesContent":["import * as jwtDecode from 'jwt-decode';\nimport axios from 'axios';\n\nimport {ACCESS_TOKEN, REFRESH_TOKEN} from '../constants/storage';\nimport {DEFAULT_BASE_URL} from '../constants/enviroment';\n\nimport {getStorage} from './shared';\n\naxios.defaults.baseURL = DEFAULT_BASE_URL;\n\nconst getAccessToken = async () => {\n  const storage = getStorage();\n\n  const accessToken = await storage.get(ACCESS_TOKEN, null);\n  const refreshToken = await storage.get(REFRESH_TOKEN, null);\n  if (!(accessToken && refreshToken)) throw Error('No user found');\n\n  const accessPayload = jwtDecode(accessToken);\n  if (new Date(parseInt(accessPayload.exp, 10) * 1000) > new Date()) return accessToken;\n\n  const {\n    data: {access: newAccessToken},\n  } = await axios.post('/api/token/refresh/', {\n    refresh: refreshToken,\n  });\n\n  await storage.set(ACCESS_TOKEN, newAccessToken);\n\n  return newAccessToken;\n};\n\nexport const loadAPI = async (url, opts = {}) => {\n  const {\n    onSuccess = (data) => data,\n    onFailure = (error) => error,\n    secure = true,\n    defaultData,\n    headers,\n    ...options\n  } = opts;\n\n  try {\n    const res = await axios(url, {\n      headers: {\n        ...(secure ? {Authorization: `Bearer ${await getAccessToken()}`} : {}),\n        ...headers,\n      },\n      ...options,\n    });\n\n    const {data, status} = res;\n    await onSuccess(data);\n    console.log(data);\n    return {data, status, error: undefined, loading: false};\n  } catch (error) {\n    if (error.response) {\n      const {data, status} = error.response;\n      await onFailure(data);\n      return {data: undefined, status, error: data, loading: false};\n    }\n\n    if (error.request) {\n      const e = {message: 'error in request setup'};\n      // noinspection JSCheckFunctionSignatures\n      return {data: undefined, status: 0, error: e, loading: false};\n    }\n\n    throw Error(error);\n  }\n};\n","export const DEFAULT_BASE_URL = 'http://packsdev.ap-south-1.elasticbeanstalk.com';\n// export const DEFAULT_BASE_URL = 'http://packstest.ap-south-1.elasticbeanstalk.com';\n","export const ACCESS_TOKEN = 'ACCESS_TOKEN';\nexport const REFRESH_TOKEN = 'REFRESH_TOKEN';\n","export const getStorage = () => (window ? window.storage : global.storage);\n","import { useEffect, useState } from 'react';\n\nimport { loadAPI } from '../helpers/api';\n\nconst defaultAPIResponse = {\n  loading: true,\n  data: undefined,\n  error: null,\n  status: 0,\n};\n\nexport const useAPI = (url, opts={}) => {\n  const { defaultData, ...options } = opts;\n  const [response, setResponse] = useState(defaultAPIResponse);\n  const [refresh, setRefresh] = useState(0);\n  const reload = () => setRefresh(refresh + 1);\n  \n  const ox = JSON.stringify(options);\n\n  useEffect(() => {\n    setResponse(defaultAPIResponse);\n    const load = async () => {\n      setResponse({ data: undefined, status: 200, error: undefined, loading: true });\n      if (defaultData)\n        setResponse({ data: defaultData, status: 200, error: undefined, loading: false });\n      // noinspection JSCheckFunctionSignatures\n      setResponse(await loadAPI(url, options));\n    };\n\n    load().then();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [url, ox, refresh]);\n\n  return { ...response, reload };\n};\n","import React, { Component } from \"react\";\n\nimport { PieChart, Pie, Tooltip, Sector } from \"recharts\";\n\nconst renderActiveShape = ({\n  cx,\n  cy,\n  midAngle,\n  innerRadius,\n  outerRadius,\n  startAngle,\n  endAngle,\n  fill,\n  payload,\n  percent,\n  value\n}) => {\n  const RADIAN = Math.PI / 180;\n\n  const sin = Math.sin(-RADIAN * midAngle);\n  const cos = Math.cos(-RADIAN * midAngle);\n  const sx = cx + (outerRadius + 10) * cos;\n  const sy = cy + (outerRadius + 10) * sin;\n  const mx = cx + (outerRadius + 30) * cos;\n  const my = cy + (outerRadius + 30) * sin;\n  const ex = mx + (cos >= 0 ? 1 : -1) * 22;\n  const ey = my;\n  const textAnchor = cos >= 0 ? \"start\" : \"end\";\n\n  return (\n    <g>\n      <Sector\n        cx={cx}\n        cy={cy}\n        innerRadius={innerRadius}\n        outerRadius={outerRadius}\n        startAngle={startAngle}\n        endAngle={endAngle}\n        fill={fill}\n      />\n      <Sector\n        cx={cx}\n        cy={cy}\n        startAngle={startAngle}\n        endAngle={endAngle}\n        innerRadius={outerRadius + 6}\n        outerRadius={outerRadius + 10}\n        fill={fill}\n      />\n      <path\n        d={`M${sx},${sy}L${mx},${my}L${ex},${ey}`}\n        stroke={fill}\n        fill='none'\n      />\n      <circle cx={ex} cy={ey} r={2} fill={fill} stroke='none' />\n      <text\n        x={ex + (cos >= 0 ? 1 : -1) * 12}\n        y={ey}\n        textAnchor={textAnchor}\n        fill='#000'\n      >\n        {`Value ${value}`}\n      </text>\n      <text\n        x={ex + (cos >= 0 ? 1 : -1) * 12}\n        y={ey}\n        dy={18}\n        textAnchor={textAnchor}\n        fill='#20a8d4'\n      >\n        {`(Rate ${(percent * 100).toFixed(2)}%)`}\n      </text>\n    </g>\n  );\n};\n\nexport default class PieChartTwoLevel extends Component {\n  constructor(props) {\n    super(props);\n    this.state={\n      activeIndex:0,\n    }\n  }\n\n  onPieEnter = (data, index) => {\n    this.setState({ activeIndex: index });\n  };\n\n  render() {\n    const { activeIndex } = this.state;\n    const { data,title } = this.props;\n    return (\n      <PieChart width={700} height={400}>\n        <text\n          x={305}\n          y={205}\n          fill='#000'\n          textAnchor='middle'\n          dominantBaseline='middle'\n        >\n          {title}\n        </text>\n        <Pie\n          dataKey='value'\n          activeIndex={activeIndex}\n          activeShape={renderActiveShape}\n          data={data}\n          cx={300}\n          cy={200}\n          innerRadius={70}\n          outerRadius={100}\n          fill='#20a8d4'\n          onMouseEnter={this.onPieEnter}\n          />\n        <Tooltip />\n      </PieChart>\n    );\n  }\n}\n","// TwoLevelBarCharts| const { data,title } = this.props;\nimport React, { PureComponent } from 'react';\nimport {\n  BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n} from 'recharts';\n\n// const data = [\n//   {\n//     name: 'Page A', uv: 4000, pv: 2400, amt: 2400,\n//   },\n//   {\n//     name: 'Page B', uv: 3000, pv: 1398, amt: 2210,\n//   },\n//   {\n//     name: 'Page C', uv: 2000, pv: 9800, amt: 2290,\n//   },\n//   {\n//     name: 'Page D', uv: 2780, pv: 3908, amt: 2000,\n//   },\n//   {\n//     name: 'Page E', uv: 1890, pv: 4800, amt: 2181,\n//   },\n//   {\n//     name: 'Page F', uv: 2390, pv: 3800, amt: 2500,\n//   },\n//   {\n//     name: 'Page G', uv: 3490, pv: 4300, amt: 2100,\n//   },\n// ];\n\nexport default class TwoLevelBarCharts extends PureComponent {\n  static jsfiddleUrl = 'https://jsfiddle.net/alidingling/30763kr7/';\n\n  render() {\n    const { data,type } = this.props;\n\n    console.log(this.props)\n    return (\n      <BarChart\n        width={500}\n        height={300}\n        data={data}\n        margin={{\n          top: 5, right: 30, left: 20, bottom: 5,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey=\"name\" />\n        <YAxis />\n        <Tooltip />\n        <Legend />\n        <Bar dataKey={type} fill=\"#8884d8\" />\n      </BarChart>\n    );\n  }\n}\n","\nexport const useFilterPieChartData=(obj,filterKey)=>{\n  const newArr = [];\n  let sum = 0;\n  let filteredData = [];\n  Object.keys(obj).map((key)=>{\n    if(filterKey){\n      sum += obj[key];\n\n    }\n    return newArr.push({ name:key,value:obj[key] })\n  })\n  if(filterKey){\n    filteredData = [{\n      value:obj[filterKey],\n      name:filterKey\n    },{\n      value:sum-obj[filterKey],\n      name:'Others'\n    }]\n  }\n  return { data : newArr, filteredData };\n}\n","import React,{ useState ,useEffect } from 'react';\n\nimport { Row, Col ,Select,Modal, List, Spin } from 'antd'\nimport FullCalendar from '@fullcalendar/react'\nimport dayGridPlugin from '@fullcalendar/daygrid'\n\n// const x={ \"4\": \"2020-02-01T05:14:29.615Z\", \"5\": \"2020-02-01T05:15:12.122Z\", \"6\": \"2020-02-01T05:17:39.598Z\", \"7\": \"2020-02-01T05:18:13.224Z\", \"13\": \"2020-02-12T06:19:01.808Z\", \"2122\": \"2020-01-06T11:42:44.144Z\", \"2124\": \"2020-01-08T06:12:48.746Z\", \"2125\": \"2020-01-10T06:13:12.561Z\", \"2127\": \"2020-01-16T06:15:39.868Z\", \"2128\": \"2020-01-23T06:16:17.273Z\", \"2129\": \"2020-01-25T06:16:45.446Z\", \"2130\": \"2020-02-01T06:17:54.141Z\", \"2131\": \"2020-02-07T06:18:10.354Z\", \"2132\": \"2020-02-07T05:19:06.856Z\", \"2133\": \"2020-02-07T05:19:42.451Z\", \"2235\": \"2020-02-14T06:19:32.898Z\", \"2236\": \"2020-02-19T06:20:30.039Z\", \"2237\": \"2020-02-21T06:20:50.174Z\", \"2238\": \"2020-07-24T06:21:12.861Z\", \"2239\": \"2020-02-24T05:20:44.326Z\", \"2240\": \"2020-02-24T05:21:36.147Z\", \"2241\": \"2020-02-24T05:22:59.249Z\", \"2242\": \"2020-02-24T05:24:19.595Z\", \"2243\": \"2020-02-24T05:25:11.876Z\", \"2244\": \"2020-02-24T05:25:21.285Z\", \"2245\": \"2020-02-29T06:21:26.754Z\", \"2246\": \"2020-03-02T05:28:28.497Z\", \"2247\": \"2020-03-02T05:28:52.907Z\", \"2248\": \"2020-03-02T05:29:30.783Z\", \"2249\": \"2020-03-02T05:30:22.059Z\", \"2250\": \"2020-03-03T06:22:50.133Z\", \"2251\": \"2020-03-04T06:23:21.913Z\", \"2252\": \"2020-03-09T06:23:37.019Z\", \"2253\": \"2020-03-14T06:24:05.020Z\", \"2255\": \"2020-03-16T06:24:40.637Z\", \"2256\": \"2020-03-18T06:25:20.639Z\", \"2257\": \"2020-03-20T07:20:01.219Z\", \"2258\": \"2020-03-20T05:48:29.860Z\", \"2260\": \"2020-03-20T07:20:34.650Z\", \"2261\": \"2020-03-16T07:19:28.003Z\", \"2262\": \"2020-03-20T06:26:06.129Z\", \"2263\": \"2020-06-08T07:22:09.644Z\", \"2264\": \"2020-06-08T07:22:46.319Z\", \"2265\": \"2020-06-08T07:23:10.968Z\", \"2266\": \"2020-06-08T07:23:42.234Z\", \"2267\": \",2020-06-11T09:58:58.184Z\", \"2268\": \"2020-06-13T07:24:17.200Z\", \"2269\": \"2020-06-13T07:24:35.314Z\", \"2270\": \"2020-06-17T07:26:26.036Z\", \"2271\": \"2020-06-17T07:25:42.664Z\", \"2272\": \"2020-06-17T07:25:14.301Z\", \"2273\": \"2020-06-22T06:27:34.081Z\", \"2274\": \"2020-06-22T07:28:16.302Z\", \"2275\": \"2020-06-23T05:37:44.467Z\", \"2276\": \"2020-06-23T05:36:51.164Z\", \"2277\": \"2020-06-25T05:40:49.693Z\", \"2278\": \"2020-06-25T05:40:09.028Z\", \"2279\": \"2020-06-25T05:41:25.579Z\", \"2280\": \"2020-06-25T05:38:24.471Z\", \"2281\": \"2020-06-25T05:41:56.455Z\", \"2282\": \"2020-06-25T05:39:07.206Z\", \"2283\": \"2020-06-25T05:42:37.404Z\", \"2284\": \"2020-06-25T05:39:33.291Z\", \"2285\": \"2020-06-25T06:28:12.682Z\", \"2286\": \"2020-06-30T07:28:49.139Z\", \"2287\": \"2020-07-03T05:57:09.779Z\", \"2288\": \"2020-07-03T05:57:49.914Z\", \"2289\": \"2020-07-06T06:01:48.764Z\", \"2290\": \"2020-07-06T06:01:05.311Z\", \"2291\": \"2020-07-06T06:00:21.026Z\", \"2292\": \"2020-07-06T05:59:55.988Z\", \"2293\": \"2020-07-06T05:59:25.371Z\", \"2294\": \"2020-07-06T06:02:24.993Z\", \"2295\": \"2020-07-06T05:58:51.479Z\", \"2296\": \"2020-07-06T05:58:29.113Z\", \"2297\": \"2020-07-03T08:21:56.039Z\", \"2298\": \"2020-07-03T08:22:24.739Z\", \"2299\": \"2020-07-07T08:24:46.405Z\", \"2300\": \"2020-07-07T08:25:12.076Z\", \"2301\": \"2020-07-06T06:28:44.649Z\", \"2302\": \"2020-07-06T10:00:13.144Z\", \"2303\": \"2020-07-06T08:23:02.344Z\", \"2304\": \"2020-07-06T08:23:26.411Z\", \"2305\": \"2020-07-07T08:26:08.569Z\", \"2306\": \"2020-07-07T08:26:24.220Z\", \"2307\": \"2020-07-08T06:29:09.335Z\", \"2308\": \"2020-07-08T08:26:55.899Z\", \"2309\": \"2020-07-08T08:27:26.905Z\", \"2310\": \"2020-07-11T06:29:25.147Z\", \"2311\": \"2020-07-14T08:31:56.146Z\", \"2312\": \"2020-07-18T06:41:07.107Z\", \"2313\": \"2020-07-18T08:33:02.288Z\", \"2314\": \"2020-07-18T08:33:25.374Z\", \"2315\": \"2020-07-22T06:08:19.740Z\", \"2316\": \"2020-07-22T06:38:02.512Z\", \"2317\": \"2020-07-27T04:42:46.356Z\", \"2318\": \"2020-07-30T07:24:46.324Z\", \"2319\": \"2020-08-04T04:14:37.383Z\", \"2320\": \"2020-08-01T07:08:27.943Z\", \"2321\": \"2020-08-01T09:19:37Z\", \"2322\": \"2020-08-08T05:06:40.401Z\", \"2323\": \"2020-08-10T09:58:59.694Z\", \"2324\": \"2020-08-11T04:40:34.876Z\", \"2325\": \"2020-08-14T06:50:31.504Z\", \"2326\": \"2020-08-19T05:33:50.096Z\", \"2327\": \"2020-08-19T07:12:52.645Z\", \"2328\": \"2020-08-22T07:55:08.415Z\", \"2329\": \"2020-08-24T07:00:53.383Z\", \"2330\": \"2020-08-26T17:39:47.695Z\", \"2331\": \"2020-08-27T06:03:23.649Z\", \"2332\": \"2020-08-28T11:15:38.309Z\", \"2333\": \"2020-08-31T07:23:32.085Z\", \"2334\": \"2020-08-31T11:03:44.574Z\", \"2335\": \"2020-09-02T05:49:26.657Z\", \"2336\": \"2020-09-02T13:20:31.897Z\", \"2337\": \"2020-09-02T03:38:55.090Z\", \"2338\": \"2020-09-04T07:00:11.035Z\", \"2339\": \"2020-09-07T05:21:24.155Z\", \"2340\": \"2020-09-07T05:36:44.194Z\", \"2342\": \"2020-09-08T09:42:11.409Z\", \"2343\": \"2020-09-08T12:33:11.138Z\", \"2344\": \"2020-09-09T07:33:05.506Z\", \"2345\": \"2020-09-09T07:38:08.572Z\", \"2346\": \"2020-09-10T07:04:36.925Z\", \"2348\": \"2020-09-15T05:12:33.875Z\", \"2349\": \"2020-09-14T05:12:01.292Z\", \"2350\": \"2020-09-16T05:06:00.453Z\", \"2352\": \"2020-09-16T08:02:42.279Z\", \"2353\": \"2020-09-18T03:25:42.109Z\", \"2356\": \"2020-09-21T09:24:59.454Z\", \"2357\": \"2020-09-22T04:19:17.877Z\", \"2358\": \"2020-09-22T08:37:20.044Z\", \"2359\": \"2020-09-24T04:08:45.384Z\", \"2360\": \"2020-09-25T05:21:47.459Z\", \"2361\": \"2020-09-28T04:55:43.903Z\", \"2362\": \"2020-09-28T09:47:35.514Z\", \"2363\": \"2020-09-30T10:55:38.324Z\", \"2364\": \"2020-09-28T14:05:57.318Z\", \"2365\": \"2020-09-30T06:51:16.536Z\", \"2366\": \"2020-09-30T10:13:01.738Z\", \"2367\": \"2020-09-30T12:12:29.689Z\" }\n\nconst dateAsKey = (p) => {\n  const tmp={};\n  for (const key in p) {\n    if (p.hasOwnProperty(key)) {\n      // console.log(key + \" -> \" + p[key]);\n      if(tmp[p[key].substr(0,10)]==undefined)\n        tmp[p[key].substr(0,10)]=[]\n      tmp[p[key].substr(0,10)].push(key)\n    }\n  }\n  return tmp;\n}\nconst parseCalData = ({ allotements,returns }) => {\n  const tmpallotements=dateAsKey(allotements);\n  const tmpreturns=dateAsKey(returns);\n  const data=[];\n  for (var key in tmpallotements) {\n    data.push(\n      { // this object will be \"parsed\" into an Event Object\n        title: `${tmpallotements[key].length} Allotment${(tmpallotements[key].length>1)?\"s\":\"\"}`, // a property!\n        start: key, // a property!\n        data:tmpallotements[key],\n        type:'allotment',\n        color:\"#CB4335\"\n      }\n    )\n  }\n  for (var key in tmpreturns) {\n    data.push(\n      { // this object will be \"parsed\" into an Event Object\n        title: `${tmpreturns[key].length} Return`, // a property!\n        start: key, // a property!\n        data:tmpreturns[key],\n        color:\"#27AE60\",\n        type:'return'\n      }\n    )\n  }\n  // callback(data)\n  return data\n}\n\n\n\n\nexport const Cal = (allotments,returns) => {\n  const [allotmentData,setallotmentData]=useState();\n  const [returnData,setreturnData]=useState();\n  const [calData,setcalData]=useState();\n\n  useEffect(() => {\n    if (allotments) {\n      setcalData(parseCalData(allotments,returns))\n    }\n  },[allotments,returns])\n  const [modalV,setmodalV]=useState(false);\n  const [currentAllotmentEvent,setcurrentAllotmentEvent]=useState([]);\n  const [currentReturnEvent,setcurrentReturnEvent]=useState([]);\n  const onEventClick = (e) => {\n    const allotmentData=calData.find(o => (new Date(`${o.start} 00:00`).toString() === e.event.start.toString() && o.type==='allotment'));\n    const returnData=calData.find(o => (new Date(`${o.start} 00:00`).toString() === e.event.start.toString() && o.type==='return'));\n    setcurrentAllotmentEvent(allotmentData?allotmentData.data:[])\n    setcurrentReturnEvent(returnData?returnData.data:[])\n    setmodalV(true)\n  }\n  return (\n    <Row>\n      <Col span={23}>\n        {\n              calData?(\n                <FullCalendar\n                  plugins={[ dayGridPlugin ]}\n                  initialView='dayGridMonth'\n                  events={calData}\n                  eventClick={(e)=>onEventClick(e)}\n          />\n              ):<Spin spinning />\n          }\n        {/* {console.log(dummy)} */}\n\n      </Col>\n      <Col span={12}>\n        <Modal\n          title='Transactions'\n          visible={modalV}\n          onOk={()=>setmodalV(false)}\n          onCancel={()=>setmodalV(false)}\n        >\n          <Row>\n            <Col span={12}>\n              <p style={{ 'textAlign':'center' }}>Allotments</p>\n              <List\n                size='small'\n                bordered\n                dataSource={currentAllotmentEvent}\n                renderItem={item => <List.Item>{item}</List.Item>}\n            />\n            </Col>\n            <Col span={12}>\n              <p style={{ 'textAlign':'center' }}>Returns</p>\n              <List\n                size='small'\n                bordered\n                dataSource={currentReturnEvent}\n                renderItem={item => <List.Item>{item}</List.Item>}\n            />\n            </Col>\n          </Row>\n\n\n\n        </Modal>\n      </Col>\n    </Row>\n  );\n};\n\nexport default Cal;\n","import React,{ useState ,useEffect } from 'react';\nimport { useAPI } from 'common/hooks/api';\nimport { Row, Col ,Select,Modal, List, Spin } from 'antd'\nimport Iframe from 'react-iframe'\n\nexport const Map = () => {\n  const { data: map } = useAPI('/map/?format=json', {});\n  console.log(map,\"map\")\n  const parser = new DOMParser();\n  let htmlDoc;\n  if(map)\n    htmlDoc = parser.parseFromString(map.map2, 'text/html');\n  return (\n    <Row>\n      <Col span={12}>\n        <div style={{ 'width':'100%' }}>\n          <div style={{ 'position':'relative','width':'100%','height':'0px','paddingBottom':'60%' }}>\n            <span style={{ 'color':'#565656' }} />\n            <Col span={24}>\n              <Iframe\n                src='data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF83MzYzZjhlODg3YTU0MGFkYjFjNjk0N2ViOGUxZjIwOSB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfNzM2M2Y4ZTg4N2E1NDBhZGIxYzY5NDdlYjhlMWYyMDkiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwXzczNjNmOGU4ODdhNTQwYWRiMWM2OTQ3ZWI4ZTFmMjA5ID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwXzczNjNmOGU4ODdhNTQwYWRiMWM2OTQ3ZWI4ZTFmMjA5IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFsyMS4wLCA3OC4wXSwKICAgICAgICAgICAgICAgICAgICBjcnM6IEwuQ1JTLkVQU0czODU3LAogICAgICAgICAgICAgICAgICAgIHpvb206IDQuNzUsCiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcHJlZmVyQ2FudmFzOiBmYWxzZSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIAoKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgdGlsZV9sYXllcl9kODA5MzVjMzVmZGQ0ZDgwYTA3ZGQwMzFhN2UzYTc1MCA9IEwudGlsZUxheWVyKAogICAgICAgICAgICAgICAgImh0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nIiwKICAgICAgICAgICAgICAgIHsiYXR0cmlidXRpb24iOiAiRGF0YSBieSBcdTAwMjZjb3B5OyBcdTAwM2NhIGhyZWY9XCJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmdcIlx1MDAzZU9wZW5TdHJlZXRNYXBcdTAwM2MvYVx1MDAzZSwgdW5kZXIgXHUwMDNjYSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIlx1MDAzZU9EYkxcdTAwM2MvYVx1MDAzZS4iLCAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsICJtYXhOYXRpdmVab29tIjogMTgsICJtYXhab29tIjogMTgsICJtaW5ab29tIjogMCwgIm5vV3JhcCI6IGZhbHNlLCAib3BhY2l0eSI6IDEsICJzdWJkb21haW5zIjogImFiYyIsICJ0bXMiOiBmYWxzZX0KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzM2M2Y4ZTg4N2E1NDBhZGIxYzY5NDdlYjhlMWYyMDkpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBtYXJrZXJfNGM3ODgwZWNmZDM5NGQyZThmOTIzNmQzZWI4MTU4MGMgPSBMLm1hcmtlcigKICAgICAgICAgICAgICAgIFsxOS4wNzU5ODM3LCA3Mi44Nzc2NTU5XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzczNjNmOGU4ODdhNTQwYWRiMWM2OTQ3ZWI4ZTFmMjA5KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8wNWIzMmJkNDY2N2Q0Y2Q4YThmZjBhODZkMjg1M2QyNiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjlhOTM3ZTFhNDg2NDE5NThmNzEzOGRmYTIxOTBmYTAgPSAkKGA8ZGl2IGlkPSJodG1sXzY5YTkzN2UxYTQ4NjQxOTU4ZjcxMzhkZmEyMTkwZmEwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NdW1iYWk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMDViMzJiZDQ2NjdkNGNkOGE4ZmYwYTg2ZDI4NTNkMjYuc2V0Q29udGVudChodG1sXzY5YTkzN2UxYTQ4NjQxOTU4ZjcxMzhkZmEyMTkwZmEwKTsKICAgICAgICAKCiAgICAgICAgbWFya2VyXzRjNzg4MGVjZmQzOTRkMmU4ZjkyMzZkM2ViODE1ODBjLmJpbmRQb3B1cChwb3B1cF8wNWIzMmJkNDY2N2Q0Y2Q4YThmZjBhODZkMjg1M2QyNikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIG1hcmtlcl84NTUxOTcyODJlZjA0NWY5OTU0ZDBkNDc1YjczY2U1MyA9IEwubWFya2VyKAogICAgICAgICAgICAgICAgWzI4LjcwNDA1OTIsIDc3LjEwMjQ5MDE5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHt9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzczNjNmOGU4ODdhNTQwYWRiMWM2OTQ3ZWI4ZTFmMjA5KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kNTNjZjJjOTFlZTM0ZjYwODFiZWRmZjEwMTM0MDQ1ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNDZhM2I4NjgzNTc0NGQzYmExZDBlNmMyMzlmYzk5YTEgPSAkKGA8ZGl2IGlkPSJodG1sXzQ2YTNiODY4MzU3NDRkM2JhMWQwZTZjMjM5ZmM5OWExIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZWxoaTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9kNTNjZjJjOTFlZTM0ZjYwODFiZWRmZjEwMTM0MDQ1Zi5zZXRDb250ZW50KGh0bWxfNDZhM2I4NjgzNTc0NGQzYmExZDBlNmMyMzlmYzk5YTEpOwogICAgICAgIAoKICAgICAgICBtYXJrZXJfODU1MTk3MjgyZWYwNDVmOTk1NGQwZDQ3NWI3M2NlNTMuYmluZFBvcHVwKHBvcHVwX2Q1M2NmMmM5MWVlMzRmNjA4MWJlZGZmMTAxMzQwNDVmKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKPC9zY3JpcHQ+'\n                width='420px'\n                height='420px'\n                id='myId'\n                className='myClassname'\n               // display=\"initial\"\n               // position=\"relative\"\n             />\n            </Col>\n          </div>\n        </div>\n      </Col>\n    </Row>\n\n  )\n}\nexport default Map;\n","import React,{ useState,useEffect } from 'react';\nimport { Row, Col ,Select, TimePicker } from 'antd'\nimport TwoLevelPieCharts from 'components/TwoLevelPieCharts';\nimport { useAPI } from 'common/hooks/api';\nimport TwoLevelBarCharts from 'components/TwoLevelBarCharts';\nimport { useFilterPieChartData } from 'hooks/filterPieChart';\nimport { Cal } from './events.screen';\nimport { Map } from './map.screen';\n\nconst { Option } = Select;\n\n\nconst dummy = {\n  'FSS001': 1936,\n  'FIN1196A': 1,\n  'FIN1196B': 1,\n  'FIN1196C': 1,\n  'FIN1196D': 1,\n  'FIN1151A': 518,\n  'FIN1151B': 90,\n  'FIN1182A': 113,\n  'FIN1182B': 87,\n  'FIN1182C': 14,\n  'FIN1187': 111,\n  'PB1162': 12,\n  'FIN1184A': 1,\n  'FIN1162A1': 133,\n  'FIN1162A2': 67,\n  'FIN1162B1': 124,\n  'FIN1162B2': 42,\n  'FIN1198A': 151,\n  'CIN1198A': 67,\n  'CIN1198B': 97,\n  'CIN1198C': 163,\n  'CIN1199A': 35,\n  'FIN1199A': 36,\n  'CSS001': 501,\n  'PB1198': 213,\n  'FIN1199B': 30,\n  'FIN1162E': 40,\n  'CIN1199B': 1,\n  'CIN1199C': 1,\n  'CIN1198D': 1,\n  'CIN1216A': 1,\n  'PL001': 220,\n  'PS001': 80,\n  'PS002': 140,\n  'PP001': 220 };\n\nconst dateAsKey = (p) => {\n  const tmp={};\n  for (const key in p) {\n    if (p.hasOwnProperty(key)) {\n      // console.log(key + \" -> \" + p[key]);\n      if(tmp[p[key].substr(0,10)]==undefined)\n        tmp[p[key].substr(0,10)]=[]\n      tmp[p[key].substr(0,10)].push(key)\n    }\n  }\n  return tmp;\n}\nconst parseCalData = (allotements,returns) => {\n  // alert(allotements)\n  const tmpallotements=dateAsKey(allotements);\n  const tmpreturns=dateAsKey(returns);\n  const data=[];\n  for (var key in tmpallotements) {\n    data.push(\n      { // this object will be \"parsed\" into an Event Object\n        title: `${tmpallotements[key].length} Allotment${(tmpallotements[key].length>1)?\"s\":\"\"}`, // a property!\n        start: key, // a property!\n        data:tmpallotements[key],\n        type:'allotment',\n        color:\"#CB4335\"\n      }\n    )\n  }\n  for (var key in tmpreturns) {\n    data.push(\n      { // this object will be \"parsed\" into an Event Object\n        title: `${tmpreturns[key].length} Return`, // a property!\n        start: key, // a property!\n        data:tmpreturns[key],\n        color:\"#27AE60\",\n        type:'return'\n      }\n    )\n  }\n  // callback(data)\n  window.k=data;\n  return data\n}\n\nconst countfromdata = (data,key) =>{\n  let count=0;\n  for(const i in data){\n    if(data[i].type==key){\n      count++;\n    }\n  }\n  return count;\n}\n\nconst parseData = (data,type) => {\n  const tmp=[];\n  for (const key in data) {\n    // for (var key2 in data[key]) {\n    tmp.push(\n      {\n        name: key, [type]: countfromdata(data[key],type),\n      }\n    )\n    // }\n\n  }\n  window.tmp=tmp\n  window.data=data\n  return tmp;\n}\n//   window.tmp=tmp\n//   window.data=data\n//   return tmp;\n// }\n\nconst parseDataMonthly = (data) => {\n  // console.log(data);\n  window.x=data\n  const tmp=[]\n  for(const key in data){\n    if(tmp[data[key].start.substr(0,7)]===undefined)\n      tmp[data[key].start.substr(0,7)]=[]\n    tmp[data[key].start.substr(0,7)].push(\n      data[key]\n    )\n  }\n  return tmp;\n}\n\nexport const DashboardScreen = () => {\n  const [ filterKey,setFilterKey ] = useState(null);\n  const[transactionHistory,settransactionHistory]=useState([])\n  const { data,filteredData } = useFilterPieChartData(dummy,filterKey)\n  const { data: allotments } = useAPI('/cal/', {});\n  const { data: returns } = useAPI('/cal-r/', {});\n\n  useEffect(() => {\n    if(returns&&allotments){\n      // alert(1)\n      // alert(returns)\n      settransactionHistory(parseDataMonthly(parseCalData(allotments,returns)))\n    }\n  },[allotments,returns])\n  return (\n    <>\n      <Row>\n        <Col span={12}>\n          {/* <TwoLevelPieCharts data={data} /> */}\n          <TwoLevelBarCharts data={parseData(transactionHistory,'allotment')} type='allotment' />\n        </Col>\n        <Col span={12}>\n          {/* <TwoLevelPieCharts data={data} /> */}\n          <TwoLevelBarCharts data={parseData(transactionHistory,'return')} type='return' />\n        </Col>\n\n      </Row>\n      <Row>\n        <Col span={12}>\n          <Cal allotements={allotments} returns={returns} />\n        </Col>\n        <Col span={12}>\n          <Map  />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default DashboardScreen;\n"],"sourceRoot":""}